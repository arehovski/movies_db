{% load static %}
{% load navigation_bar %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Movies DB</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
</head>
<body>
<div class="container">
    <div class="row mt-3 mb-3 header" style="background-color: gray">
        {% block header %}
            <div class="col-3 m-2 pt-3 pb-3" style="background-color: goldenrod">
                <a href="{% url 'home_page' %}">MOVIES DATABASE</a>
            </div>
            <div class="col-6 search">
                <form method="get">
                    {% csrf_token %}

                </form>
            </div>
            <div class="col-3 login" style="background-color: #0c5460">

            </div>
        {% endblock %}
    </div>
    <div class="row mb-2 mt-2">
        {% navigation_bar %}
        <div class="col-9 rounded movie-list" style="background-color: #1d1d1d">
            {% block content %}
                <hr/>
                {% for movie in movies %}
                    <div class="row">
                        <div class="col-3">
                            <a href="{% url 'movie_view' pk=movie.id %}"><img
                                    class="movie-list-poster img-fluid rounded" height="180" width="120"
                                    src="{{ movie.image.url }}" alt="movie-poster"></a>
                        </div>
                        <div class="col-7">
                            <a href="{% url 'movie_view' pk=movie.id %}">
                                <div>{{ movie.title }}</div>
                            </a>
                            {% if movie.title_en %}
                                <div>{{ movie.title_en }}</div>
                            {% endif %}
                            <div>
                                <p><a href="{% url 'year_view' year=movie.year %}">{{ movie.year }}</a></p>
                                <span class="movie-genres">
                                {% for genre in movie.genre.all %}
                                    <a href="{% url 'genre_view' genre=genre %}">{{ genre }}</a>
                                    {% if not forloop.last %},{% endif %}
                                {% endfor %}
                            </span>

                                <span class="movie-countries pl-1">
                                {% for country in movie.country.all %}
                                    <a href="{% url 'country_view' country=country %}">{{ country }}</a>
                                    {% if not forloop.last %},{% endif %}
                                {% endfor %}
                            </span>

                            </div>
                        </div>
                        <div class="col-2 rating">
                            <p>Рейтинг кинопоиска {{ movie.rating_kp }}</p>
                            {% if movie.rating_imdb %}
                                <p>Рейтинг IMDB {{ movie.rating_imdb }}</p>
                            {% endif %}
                        </div>
                    </div>
                    <hr/>
                {% endfor %}

                {% block pagination %}
                    {% if movies %}
                        <ul class="pagination">
                            {% if movies.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ movies.previous_page_number }}">&laquo;
                                        previous</a>
                                </li>
                            {% endif %}
                            <li class="page-item active">
                                {% for i in movies.paginator.page_range %}
                                    {% ifequal i movies.number %}
                                        <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                                    {% endifequal %}
                                {% endfor %}
                            </li>
                            {% if movies.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ movies.next_page_number }}">next &raquo;</a>
                                </li>
                            {% endif %}
                        </ul>
                    {% endif %}
                {% endblock pagination %}
            {% endblock content %}
        </div>
    </div>
</div>

<script src="{% static "js/bootstrap.min.js" %}"></script>
</body>
</html>